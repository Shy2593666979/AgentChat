<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
![2a9a914f959cbe8efb9b1a5037ad866](https://github.com/user-attachments/assets/9a90b82e-1076-4b26-96ef-3da1eb3a04b0)

- [æ¬¢è¿æ¥åˆ° æ™ºè¨€å¹³å°](#%E6%AC%A2%E8%BF%8E%E6%9D%A5%E5%88%B0-%E6%99%BA%E8%A8%80%E5%B9%B3%E5%8F%B0)
  - [æˆæœå›¾](#%E6%88%90%E6%9E%9C%E5%9B%BE)
    - [æ™ºè¨€å¹³å°é¦–é¡µ](#%E6%99%BA%E8%A8%80%E5%B9%B3%E5%8F%B0%E9%A6%96%E9%A1%B5)
    - [ä½¿ç”¨GoogleAgentã€WeatherAgentã€DeliveryAgentã€ArxivAgent](#%E4%BD%BF%E7%94%A8googleagentweatheragentdeliveryagentarxivagent)
    - [æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰å·¥å…·](#%E6%94%AF%E6%8C%81%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B7%A5%E5%85%B7)
    - [å°å½©è›‹(å…ˆæ˜è¯´æˆ‘æ˜¯IKUN) ğŸ¤”ğŸ¤”ğŸ¤”](#%E5%B0%8F%E5%BD%A9%E8%9B%8B%E5%85%88%E6%98%8E%E8%AF%B4%E6%88%91%E6%98%AFikun-)
- [é¡¹ç›®åº”ç”¨](#%E9%A1%B9%E7%9B%AE%E5%BA%94%E7%94%A8)
- [å¿«é€Ÿå¼€å§‹](#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B)
    - [ä¸€ã€é…ç½®æ–‡ä»¶](#%E4%B8%80%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6)
    - [äºŒã€å¯åŠ¨åç«¯](#%E4%BA%8C%E5%90%AF%E5%8A%A8%E5%90%8E%E7%AB%AF)
    - [ä¸‰ã€å¯åŠ¨å‰ç«¯](#%E4%B8%89%E5%90%AF%E5%8A%A8%E5%89%8D%E7%AB%AF)
  - [ä½¿ç”¨Docker å¿«é€Ÿå¯åŠ¨](#%E4%BD%BF%E7%94%A8docker-%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

# æ¬¢è¿æ¥åˆ° AgentChat

AgentChat æ˜¯ä¸€ä¸ªå¼€æºçš„æ™ºèƒ½ä½“äº¤æµä¸å¼€å‘å¹³å°ï¼Œè®©æ›´å¤šçš„AIGCçˆ±å¥½è€…æ›´å¥½çš„äº†è§£Agent

## æˆæœå›¾ï¼ˆV1.0ï¼Œ V2.0å‰ç«¯é¡µé¢è¿˜æ²¡åšå¥½ï¼‰
### æ™ºè¨€å¹³å°é¦–é¡µ
![1725542910516](https://github.com/user-attachments/assets/9036192a-8d19-4c3f-86d9-98f2b057b6b3)

### ä½¿ç”¨GoogleAgentã€WeatherAgentã€DeliveryAgentã€ArxivAgent

<table>
  <tr>
    <td><img src="https://github.com/user-attachments/assets/932a0263-6949-413c-ae06-2afd92b92eef" alt="Image 1" width="1000"></td>
    <td><img src="https://github.com/user-attachments/assets/263870c0-f6a9-437c-a289-13763804b3ee" alt="Image 2" width="1000"></td>
  </tr>
</table>

<table>
  <tr>
    <td><img src="https://github.com/user-attachments/assets/1b295f35-f122-400c-8351-e5b3e3f65663" alt="Image 1" width="1000"></td>
    <td><img src="https://github.com/user-attachments/assets/059d4711-10af-40ea-8707-fd9967aa26a9" alt="Image 3" width="1000"></td>
  </tr>
</table>



### æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰å·¥å…·
ç”¨æˆ·éœ€è¦è¾“å…¥openai çš„å‚æ•°æ ¼å¼ï¼Œä»¥åŠè‡ªå®šä¹‰ä»£ç ï¼ˆæ˜¾å¾—æ¯”è¾ƒä¸æ˜¯é‚£ä¹ˆæ™ºèƒ½ï¼Œåç»­ä¼šæ›´æ”¹ğŸ˜”ï¼‰
![1725543216627](https://github.com/user-attachments/assets/beb54a14-521a-41fd-9941-ad82262276ff)

### å°å½©è›‹(å…ˆæ˜è¯´æˆ‘æ˜¯IKUN) ğŸ¤”ğŸ¤”ğŸ¤”
åŠ è½½å›¾æ ‡ï¼š

![image](https://github.com/user-attachments/assets/3e4201c2-0f2b-4f9f-906c-a09e49aea9b8)

![kunkun](https://github.com/user-attachments/assets/16e8a37b-32c2-4124-b6cf-151335482937)


# é¡¹ç›®åº”ç”¨

ä½¿ç”¨ æ™ºè¨€åº”ç”¨å¹³å°ï¼Œå¯ä»¥æ„å»ºå„ç±»æ›´ä¸°å¯Œçš„Agentsä¾›æˆ‘ä»¬ä½¿ç”¨

é»˜è®¤æä¾›çš„Agent

- ğŸ“§ æ ¹æ®æˆ‘ä»¬æƒ³è¦çš„æ”¶ä»¶äººä»¥åŠé‚®ä»¶ä¿¡æ¯è¿›è¡Œè‡ªåŠ¨å‘é€
- ğŸŒ å¸®åŠ©æˆ‘ä»¬æœç´¢æ›´åŠ æœ‰æ•ˆçš„ä¿¡æ¯ï¼Œæ›´å®¹æ˜“ç†è§£
- ğŸŒ¥ï¸ å¸®åŠ©æˆ‘ä»¬æŸ¥ç»™å®šåœ°åŒºçš„å½“å‰å¤©æ°”ä»¥åŠé¢„æŠ¥å¤©æ°”
- ğŸ“ƒ å¸®åŠ©æˆ‘ä»¬æŸ¥æ‰¾ä¸€äº›é¡¶å°–è®ºæ–‡
- ğŸ“¦ æ ¹æ®å¿«é€’å…¬å¸å’Œå•å·æŸ¥æ‰¾å¿«é€’çš„ä¿¡æ¯
- ğŸ“‚ æ ¹æ®ç”¨æˆ·æä¾›çš„æ–‡æ¡£è·¯å¾„è¿›è¡ŒåŠ è½½åˆ°çŸ¥è¯†åº“è¿›è¡Œæ£€ç´¢ï¼Œæ”¯æŒ.pdf .docx .xlsx .md .txtæ–‡æ¡£åŠ è½½

# å¿«é€Ÿå¼€å§‹

### ä¸€ã€é…ç½®æ–‡ä»¶

**1.é…ç½®LangFuse**

é¦–å…ˆåœ¨`chat/config/langfuse_config.py` ä¸­ä¿®æ”¹LangFuseçš„API KEY

é»˜è®¤çš„è¿æ¥æ˜¯LangFuseå®˜ç½‘ï¼Œå¦‚æœè¿æ¥ä¸é€šçš„è¯ä¹Ÿå¯ä»¥ä½¿ç”¨docker å°†LangFuseéƒ¨ç½²åœ¨æœ¬åœ°

**2.é…ç½®LLM**

åœ¨`chat/config/llm_config.py`ä¸­ä¿®æ”¹LLMsçš„API KEY å’Œ BASE_URLï¼Œç›®å‰ä»…æ”¯æŒfunction callçš„LLMs

ä¾‹å¦‚ï¼šé€šä¹‰åƒé—®å®˜ç½‘çš„qwen-plus...  openaiçš„GPT-3.5....

**3.é…ç½®MySQL**

åœ¨`chat/config/service_config.py`ä¸­ä¿®æ”¹æˆè‡ªå·±çš„MySQLåœ°å€å’ŒRedisçš„åœ°å€

### äºŒã€å¯åŠ¨åç«¯

**1.å®‰è£…ä¾èµ–**

`pip install -r requirement.txt`

**2.å¯åŠ¨**

åœ¨DeepSleep\src\backendç›®å½•ä¸‹æ‰§è¡Œå¯åŠ¨å‘½ä»¤

```shell
uvicorn agentchat.main:app --port 7860 --host 0.0.0.0
```

### ä¸‰ã€å¯åŠ¨å‰ç«¯

**1.è¿›å…¥åˆ°å‰ç«¯çš„æ–‡ä»¶å¤¹ä¸‹**

**2.ä¸‹è½½ä¾èµ–æ–‡ä»¶**
```shell
npm install
```
**3.å¯åŠ¨å‰ç«¯æœåŠ¡**
```
npm run dev
```

## ä½¿ç”¨Docker å¿«é€Ÿå¯åŠ¨

ä½¿ç”¨Dockerçš„è¯å°±å°‘äº†é…ç½®MySQLæ•°æ®åº“æ­¥éª¤

**1.è¿›å…¥dockeræ–‡ä»¶**

**2.æ‰§è¡ŒDockerå‘½ä»¤**

`docker-compose up --build `

**3.ç”¨ä¸Šè¿°å¯åŠ¨åç«¯ã€å‰ç«¯çš„æ–¹å¼è¿›è¡Œå¯åŠ¨æ•´ä½“é¡¹ç›®**

**4.æ›´æ–°é…ç½®æ–‡ä»¶åé‡æ–°å¯åŠ¨**

## å¯åŠ¨äº‹é¡¹

## å¯åŠ¨éœ€è¦æ³¨æ„äº‹é¡¹

å› ä¸ºfast-jwt-authç‰ˆæœ¬å¾ˆå¤šå¹´æ²¡æœ‰å†æ›´æ–°ï¼Œæ‰€ä»¥å…¶ä¸­ä½¿ç”¨çš„pydanticç‰ˆæœ¬è¾ƒä½ã€‚
ä½†æ˜¯åƒè¯¥é¡¹ç›®ä¸­çš„Langchainã€MCPéƒ½éœ€è¦å‡çº§pydantic >= 2ã€‚
å½“å‰ä¹Ÿæ²¡ä»€ä¹ˆå¥½çš„åŠæ³•ï¼Œæ‰€ä»¥å»ºè®®å°†è™šæ‹Ÿç¯å¢ƒä¸­çš„fastapi-jwt-authçš„SDKä¸­config.pyæ–‡ä»¶è¿›è¡Œæ›´æ”¹

ä¾‹å¦‚åœ¨æˆ‘ç”µè„‘ä¸­ï¼Œéœ€è¦æ›´æ”¹çš„æ–‡ä»¶å°±æ˜¯

`D:\conda\envs\agentchat\Lib\site-packages\fastapi_jwt_auth\config.py` 

æ›´æ”¹æˆä»¥ä¸‹ä»£ç ï¼š
```python
from datetime import timedelta
from typing import Optional, Union, Sequence, List
from pydantic import (
    BaseModel,
    validator,
    StrictBool,
    StrictInt,
    StrictStr
)

class LoadConfig(BaseModel):
    authjwt_token_location: Optional[List[StrictStr]] = ['headers']
    authjwt_secret_key: Optional[StrictStr] = None
    authjwt_public_key: Optional[StrictStr] = None
    authjwt_private_key: Optional[StrictStr] = None
    authjwt_algorithm: Optional[StrictStr] = "HS256"
    authjwt_decode_algorithms: Optional[List[StrictStr]] = None
    authjwt_decode_leeway: Optional[Union[StrictInt,timedelta]] = 0
    authjwt_encode_issuer: Optional[StrictStr] = None
    authjwt_decode_issuer: Optional[StrictStr] = None
    authjwt_decode_audience: Optional[Union[StrictStr,Sequence[StrictStr]]] = None
    authjwt_denylist_enabled: Optional[StrictBool] = False
    authjwt_denylist_token_checks: Optional[List[StrictStr]] = ['access','refresh']
    authjwt_header_name: Optional[StrictStr] = "Authorization"
    authjwt_header_type: Optional[StrictStr] = "Bearer"
    authjwt_access_token_expires: Optional[Union[StrictBool,StrictInt,timedelta]] = timedelta(minutes=15)
    authjwt_refresh_token_expires: Optional[Union[StrictBool,StrictInt,timedelta]] = timedelta(days=30)
    # # option for create cookies
    authjwt_access_cookie_key: Optional[StrictStr] = "access_token_cookie"
    authjwt_refresh_cookie_key: Optional[StrictStr] = "refresh_token_cookie"
    authjwt_access_cookie_path: Optional[StrictStr] = "/"
    authjwt_refresh_cookie_path: Optional[StrictStr] = "/"
    authjwt_cookie_max_age: Optional[StrictInt] = None
    authjwt_cookie_domain: Optional[StrictStr] = None
    authjwt_cookie_secure: Optional[StrictBool] = False
    authjwt_cookie_samesite: Optional[StrictStr] = None
    # # option for double submit csrf protection
    authjwt_cookie_csrf_protect: Optional[StrictBool] = True
    authjwt_access_csrf_cookie_key: Optional[StrictStr] = "csrf_access_token"
    authjwt_refresh_csrf_cookie_key: Optional[StrictStr] = "csrf_refresh_token"
    authjwt_access_csrf_cookie_path: Optional[StrictStr] = "/"
    authjwt_refresh_csrf_cookie_path: Optional[StrictStr] = "/"
    authjwt_access_csrf_header_name: Optional[StrictStr] = "X-CSRF-Token"
    authjwt_refresh_csrf_header_name: Optional[StrictStr] = "X-CSRF-Token"
    authjwt_csrf_methods: Optional[List[StrictStr]] = ['POST','PUT','PATCH','DELETE']

    @validator('authjwt_access_token_expires')
    def validate_access_token_expires(cls, v):
        if v is True:
            raise ValueError("The 'authjwt_access_token_expires' only accept value False (bool)")
        return v

    @validator('authjwt_refresh_token_expires')
    def validate_refresh_token_expires(cls, v):
        if v is True:
            raise ValueError("The 'authjwt_refresh_token_expires' only accept value False (bool)")
        return v

    @validator('authjwt_denylist_token_checks', each_item=True)
    def validate_denylist_token_checks(cls, v):
        if v not in ['access','refresh']:
            raise ValueError("The 'authjwt_denylist_token_checks' must be between 'access' or 'refresh'")
        return v

    @validator('authjwt_token_location', each_item=True)
    def validate_token_location(cls, v):
        if v not in ['headers','cookies']:
            raise ValueError("The 'authjwt_token_location' must be between 'headers' or 'cookies'")
        return v

    @validator('authjwt_cookie_samesite')
    def validate_cookie_samesite(cls, v):
        if v not in ['strict','lax','none']:
            raise ValueError("The 'authjwt_cookie_samesite' must be between 'strict', 'lax', 'none'")
        return v

    @validator('authjwt_csrf_methods', each_item=True)
    def validate_csrf_methods(cls, v):
        if v.upper() not in ["GET", "HEAD", "POST", "PUT", "DELETE", "PATCH"]:
            raise ValueError("The 'authjwt_csrf_methods' must be between http request methods")
        return v.upper()

    class Config:
        str_min_length = 1
        str_strip_whitespace = True
```

## å‘é‡åº“å®‰è£…

https://milvus.io/docs/zh/install_standalone-windows.md

## Rerankæ¨¡å‹ç¤ºä¾‹

https://help.aliyun.com/zh/model-studio/text-rerank-api

## Embeddingæ¨¡å‹ç¤ºä¾‹

https://help.aliyun.com/zh/model-studio/embedding-interfaces-compatible-with-openai